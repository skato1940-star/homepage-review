<!-- records.html -->

<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>演奏会の記録</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/scroll-hint@latest/css/scroll-hint.css">
    <script src="https://unpkg.com/scroll-hint@latest/js/scroll-hint.min.js"></script>
  </head>

  <body class="records-page">
    <body style="visibility: hidden;"></body>
    <div id="header-placeholder"></div>
    <main>
      <section class="about">
        <h3>演奏会の記録</h3>
        <p>※メンテナンス中</br>1972年に開催した第1回定期演奏会から現在までの演奏会の記録です。</p>
      </section>
      
      <section class="concert-records">
        <h2></h2>
        <button id="toggle-all">すべて展開</button>
        
        <details>
          <summary>2021年〜2025年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-2021-2025">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>2016年〜2020年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-2016-2020">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>2011年〜2015年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-2011-2015">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>2006年〜2010年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-2006-2010">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>2001年〜2005年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-2001-2005">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1996年〜2000年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1996-2000">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1991年〜1995年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1991-1995">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1986年〜1990年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1986-1990">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1981年〜1985年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1981-1985">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1976年〜1980年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1976-1980">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <details>
          <summary>1972年〜1975年</summary>
          <div class="table-wrapper">
            <div class="js-scrollable">
              <table id="table-1972-1975">
                <thead>
                  <tr><th>日付</th><th>演奏会名</th><th>会場</th><th>指揮</th><th>演目</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </details>

        <!-- 以下、年代ごとに繰り返し -->
        
      </section>

    </main>
    
    <div id="footer-placeholder"></div>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script>
      function loadCSV(file, tableId) {
        fetch(file)
          .then(res => res.text())
          .then(csv => {
            const parsed = Papa.parse(csv, { header: true, skipEmptyLines: true });
            const tbody = document.querySelector(`#${tableId} tbody`);
            parsed.data.forEach(row => {
              const tr = document.createElement("tr");
              ["日付", "演奏会名", "会場", "指揮", "演目"].forEach(key => {
                const td = document.createElement("td");
                // 「指揮」と「演目」は改行を <br> に変換
                if (key === "演目" || key === "指揮" || key === "演奏会名" || key === "会場") {
                  td.innerHTML = row[key]
                    ? row[key].replace(/\n/g, "<br>").replace(/\\n/g, "<br>")
                    : "";
                } else {
                  td.textContent = row[key] || "";
                }
                tr.appendChild(td);
              });
              tbody.appendChild(tr);
            });
          });
      }

      // 年代ごとに呼び出し
      loadCSV("records/concert_2021_2025.csv", "table-2021-2025");
      loadCSV("records/concert_2016_2020.csv", "table-2016-2020");
      loadCSV("records/concert_2011_2015.csv", "table-2011-2015");
      loadCSV("records/concert_2006_2010.csv", "table-2006-2010");
      loadCSV("records/concert_2001_2005.csv", "table-2001-2005");
      loadCSV("records/concert_1996_2000.csv", "table-1996-2000");
      loadCSV("records/concert_1991_1995.csv", "table-1991-1995");
      loadCSV("records/concert_1986_1990.csv", "table-1986-1990");
      loadCSV("records/concert_1981_1985.csv", "table-1981-1985");
      loadCSV("records/concert_1976_1980.csv", "table-1976-1980");
      loadCSV("records/concert_1972_1975.csv", "table-1972-1975");
      // 以下、必要な年代分追加
    </script>

    <script>
      const toggleButton = document.getElementById("toggle-all");
      let expanded = false;

      toggleButton.addEventListener("click", () => {
        const detailsList = document.querySelectorAll(".concert-records details");
        detailsList.forEach(detail => {
          detail.open = !expanded;
        });

        expanded = !expanded;
        toggleButton.textContent = expanded ? "すべて折りたたむ" : "すべて展開";
      });
    </script>

    <script>
      new ScrollHint('.js-scrollable', {
        i18n: {
          scrollable: 'スクロールできます' // ← 日本語に変更
        }
      });
    </script>

    <script>
      new ScrollHint('.js-scrollable', {
        suggestiveShadow: true, // 影でスクロール可能を示す
        remainingTime: 5000     // ヒントを3秒後に消す
      });
    </script>

    <script>
      Promise.all([
        fetch("header.html").then(res => res.text()),
        fetch("footer.html").then(res => res.text())
      ]).then(([header, footer]) => {
        document.getElementById("header-placeholder").innerHTML = header;
        document.getElementById("footer-placeholder").innerHTML = footer;
        // ヘッダーが挿入された後にイベントを登録
        const toggleButton = document.querySelector(".menu-toggle");
        const navSns = document.querySelector(".nav-sns");

        toggleButton.addEventListener("click", () => {
          navSns.classList.toggle("open");

          // 開閉状態に応じて文字を切り替え
          if (navSns.classList.contains("open")) {
            toggleButton.textContent = "✕"; // 閉じるアイコン
            toggleButton.setAttribute("aria-label", "メニューを閉じる");
          } else {
            toggleButton.textContent = "☰"; // 開くアイコン
            toggleButton.setAttribute("aria-label", "メニューを開く");
          }
        });
        document.body.style.visibility = "visible";
      });
    </script>
    
    <script src="script.js"></script>

  </body>

</html>